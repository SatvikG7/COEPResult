import { subjectMapping } from "./subjectMapping";
// temps.map((temp) => {
//     temp.map((x) => {
//         const [key, value] = [x[0], x.slice(1).join(' ')];
//         subjectMapping[key] = value;
//     })
// })
const e = `1 MA-21001 Probability and Statistics for Engineers 3
2 ML-21001 Constitution of India 0
3 AS(MI)-22004 Applied Finance 3
4 HS-21001 Entrepreneurship Principles and Process 1
5 CE-17020 Design of RC Structures 3
6 ICE(IF)-20002 Sensors and Automation 2
7 CE-20011 Environmental Engineering 3
8 CE(DE)-21005 Foundation Engineering 3
9 CE(OC)-22003 MOOC - Industrial Water Treatment 3
10 MA(MI)-22004 Design of Financial Markets Systems 3
11 CE-21011 Construction Management 3
12 PH-15003 Solid State Physics and Statistical Thermodynamics 3
13 EF-15004 Computer Programming 3
14 CE-21015 Design of RC Structures Laboratory 1
15 AS(ILE)-17013 Japanese Language -II 2
16 CE(DE)-21006 Computational Methods in Civil Engineering 3
17 GY(EA)-19001 Physical Education 0
18 CE(DE)-22011 Prestressed Concrete Structures 3
19 IOC-21010 Digital Image Processing Applications 2
20 CE(DE)-22008 Advanced Foundation Engineering 3
21 CE-17021 Water Resources Engineering 4
22 CE-20008 Surveying and Geomatics 4
23 CE-20010 Structural Mechanics 3
24 CE-21012 Design of RC Structures 3
25 ETC(MI)-22002 Cloud Computing and IoT Platforms 3
26 CH-15002 Applied Chemistry Laboratory 1
27 MA-20004 Vector Calculus and Partial Differential Equations 3
28 CE(OC)-22004 MOOC - Advanced Foundation Engineering 3
29 MA-15002 Univariate Calculus 3
30 CE(DE)-22015 Water Resources Planning and Management 3
31 CE-17024 Water Resources Engineering Lab 1
32 CE-21010 Mini project 2
33 CE-22006 Internship and Major Project with Industry/Corporate/Academia 8
34 CE(DE)-22010 Industrial Wastewater Treatment 3
35 CE(HO)-22005 RCC Design of Foundations 3
36 CE-21013 Hydrology and Water Resources Engineering 4
37 CE-22005 Major Project 8
38 CT(MI)-22002 Data Science 3
39 CE(DE)-22016 Structural Health Monitoring and Retrofitting 3
40 CE-17023 Design of RC Structures Lab 1
1 CT-21015 Mini project ["D-S-P-T: Design-Simulate- Prototype -Test Software Engineering: Mini project"] - Stage II 3
2 ME-15003 Computer Aided Engineering Drawing Laboratory 1
3 CT-21014 Design and Analysis of Algorithms 4
4 CT-17022 Operating Systems 3
5 CT-21012 Data Science 3
6 CT(OC)-22004 MOOC - Reinforcement Learning 2
7 LL-18042 Liberal Learning Course - Agriculture 1
8 LL-22001 Liberal Learning Course - Agriculture 1
9 CT-21010 Operating Systems 3
10 CT-20017 Data Structures and Algorithms - II Laboratory 1
11 CT(DE)-22032 Geographical Information Systems 3
12 CT(HO)-22004 IOT Security 3
13 CT(DE)-22027 System Administration 3
14 CT(OC)-22010 MOOC- GPU Architectures and Programming 2
15 EF-15003 Computer Aided Engineering Drawing 2
16 CT-21013 Data Science Laboratory 1
17 CT(HO)-22003 Reinforcement Learning 3
18 CT(DE)-22040 GPU Computing 3
19 CT-18008 Project Stage-II 6
20 CT(DE)-22038 Geographical Information Systems Laboratory 1
21 CT-22006 Project 8
22 CT(DE)-22033 System Administration Laboratory 1
23 CT(DE)-22042 GPU Computing Laboratory 1
24 CT-17019 Operating Systems Lab 1
25 CT-21011 Operating Systems Laboratory 1
26 GY(EA)-19001 Physical Education 0
1 EE(OC)-22001 MOOC - Fuzzy Sets, Logic and Systems & Applications 3
2 EE(OC)-22002 MOOC - Smart Grid: Basics to Advanced Technologies 3
3 EE(DE)-22008 Energy Storage System 3
4 EE(OC)-22004 MOOC - Introduction to Internet of Things 3
5 EE-22007 Major Project Stage-II 8
6 MA(MI)-22004 Design of Financial Markets Systems 3
7 EE(DE)-22010 Internet of Things 3
8 EE(OC)-22003 MOOC - Problem Solving Through Programming In C 3
9 ICE(MI)-22002 Industry 4.0 and Internet of Things 3
10 ETC(MI)-22002 Cloud Computing and IoT Platforms 3
11 CT(MI)-22002 Data Science 3
12 EE(DE)-22012 Big Data Analysis 3
13 EE(DE)-22006 Energy Conservation and Audit 3
14 EE-22008 Internship and Major Project with Industry/Corporate/Academia 8
15 AS(MI)-22004 Applied Finance 3
16 EE(HO)-22002 Sliding Mode Control 3
1 AS(ILE)-17008 English Language Proficiency -II 2
2 ET-18011 Simulation Tools 2
3 LL-18015 Liberal Learning:Political Science 1
4 ET(OC)-22003 MOOC - Introduction to Database Systems 3
5 ET-21015 Internet of Things Lab 1
6 ET(OC)-22008 MOOC - Computer Vision and Image Processing -
Fundamentals and Applications 3
7 ILE-18061 Materials and Processes for e-Mobility 3
8 IOC-21001 Programmable Logic Controller and Its Applications 2
9 ET-21011 Internet of Things 3
10 LL-18049 Liberal Learning Course - Geography 1
11 ET(HO)-22002 Software Defined Networks 3
12 ET(OC)-22007 MOOC - Design and Analysis of VLSI Subsystems 3
13 ET(DE)-22007 Biomedical Engineering 3
14 ET-21016 CMOS VLSI Design Lab 1
15 ET(DE)-22009 Natural Language Processing 3
16 AS(HS)-21005 Industrial Psychology 2
17 AS(MI)-22004 Applied Finance 3
18 ET-17015 Configurable Design and Verification 3
19 ET-21009 Mini Project 2
20 ET-21014 Data Communication and Networking Lab 1
21 ET-20012 Integrated Circuits and Applications 3
22 EE(MI)-22002 Hydro Energy Systems 3
23 ICE(MI)-22002 Industry 4.0 and Internet of Things 3
24 MA-20005 Multivariate Calculus And Differential Equations 5
25 ET-21013 Power Electronics and Drives 3
26 ET(DE)-22004 Embedded Software and RTOS 3
27 ET-21017 Power Electronics and Drives Lab 1
28 ET-22007 Project 8
29 MA(MI)-22004 Design of Financial Markets Systems 3
30 CT(MI)-22002 Data Science 3
31 ML-21002 Environmental Studies 0
32 ET(OC)-22010 MOOC - VLSI Physical Design with Timing Analysis 3
33 ET(OC)-22009 MOOC - Machine Learning for Engineering and Science Applications 3
34 ET-17010 Mini Project 2
35 ET-22008 Internship and Project 8
1 IE-21009 Mini project 2
2 MA(MI)-22004 Design of Financial Markets Systems 3
3 IE(DE)-22004 Batch Process Control 3
4 IE(OC)-22004 MOOC - Optimal Control 3
5 EE(MI)-22002 Hydro Energy Systems 3
6 IE-20008 Automatic Control System 3
7 IOC-21010 Digital Image Processing Applications 2
8 IE(OC)-22001 MOOC - Machine Learning 3
9 MA-20004 Vector Calculus and Partial Differential Equations 3
10 IE-21012 Analytical Instrumentation 3
11 AS(MI)-22004 Applied Finance 3
12 IE-22005 Major Project 8
13 IE(DE)-22006 Medical Instrumentation-II 3
14 CT(MI)-22002 Data Science 3
15 IE-21013 Instrument and System Design 3
16 IE(DE)-22009 Artificial Intelligence and Machine Learning for Process Control 3
17 IE(OC)-22003 MOOC - Batch Process Control 3
18 ML-21002 Environmental Studies 0
19 IE(OC)-22002 MOOC - Medical Research 3
1 MA-21001 Probability and Statistics for Engineers 3
2 CT(MI)-22002 Data Science 3
3 MFG-22010 Mini project D-S-P-T: Design-Simulate- PrototypeTest 2
4 MFG-23009 Internet of Things 2
5 MFG(HO)-23004 Mechatronics System Design 3
6 EE(MI)-22002 Hydro Energy Systems 3
7 ICE(MI)-22002 Industry 4.0 and Internet of Things 3
8 IOC-21010 Digital Image Processing Applications 2
9 MA-20005 Multivariate Calculus And Differential Equations 5
10 AS(MI)-22004 Applied Finance 3
11 MFG-22012 Operations Research 3
12 MFG-23008 Major Project 10
13 MFG-22014 Manufacturing Automation Laboratory 1
14 ETC(MI)-22002 Cloud Computing and IoT Platforms 3
15 ME(MI)-22002 Introduction to CAD/CAM 3
1 ME-21010 Theory and Design of Mechanical Systems 4
2 ME-22007 Internship and Major Project with Non domain organization 8
3 ME(DE)-22016 AI & ML For Mechanical Engineers 3
4 ME-21011 Steam and Gas Turbine 3
5 AS(HS)-21004 Spanish Language 2
6 AS(MI)-22004 Applied Finance 3
7 ME(OC)-22007 MOOC - An Introduction to Artificial Intelligence 3
8 ME(OC)-22008 MOOC - Introduction to Machine Learning 3
9 ME(OC)-22010 MOOC - Power Plant System Engineering 3
10 ME(DE)-22026 Manufacturing Philosophies 3
11 ME(HO)-22005 Automotive Transmission and Control 3
12 ME(DE)-22010 Energy Conservation and Management 3
13 MA-20004 Vector Calculus and Partial Differential Equations 3
14 ME(DE)-22019 Design of Heat Exchanger 3
15 ME(DE)-22024 Tribology 3
16 ME(OC)-22011 MOOC - Rocket Propulsion 3
17 ICE(MI)-22002 Industry 4.0 and Internet of Things 3
18 IOC-21010 Digital Image Processing Applications 2
19 ME-20005 Fluid Mechanics 3
20 GY(EA)-19001 Physical Education 0
21 ME(OC)-22002 MOOC - Product Design and Manufacturing 3
22 ME(OC)-22009 MOOC - Non-conventional Energy Resources 3
23 ME(DE)-22018 Project Management 3
24 ME-22006 Major Project 8
25 ETC(MI)-22002 Cloud Computing and IoT Platforms 3
26 ME(OC)-22006 MOOC - Aircraft Design 3
27 ME-20004 Theory of Machines - I 3
28 ME-22008 Internship and Major Project with Non domain organization 8
29 ME-22007 Internship and Major Project with Industry/Corporate/Academia 8
30 CT(MI)-22002 Data Science 3
31 ME(DE)-22025 Advanced CAD/CAM 3
1 CE(MI)-22002 Basics of Transportation Engineering 3
2 MA(MI)-22004 Design of Financial Markets Systems 3
3 IOC-21010 Digital Image Processing Applications 2
4 AS(MI)-22004 Applied Finance 3
5 HS-21001 Entrepreneurship Principles and Process 1
6 MT(DE)-22011 Biomaterials 3
7 MT(OC)-22006 MOOC - Dealing with Materials Data: Collection Analysis and Interpretation 3
8 GY(EA)-19001 Physical Education 0
9 MT(OC)-22001 MOOC - Surface Engineering For Corrosion And Wear Resistance Application 3
10 MT(OC)-22004 MOOC - Aqueous Corrosion and Its Control 3
11 MA-20004 Vector Calculus and Partial Differential Equations 3
12 MT(OC)-22005 MOOC - Finite Element Modeling of Welding Processes 3
13 MT(OC)-22003 MOOC - Carbon Material and Manufacturing 3
14 MT(HO)-22004 High Temperature Corrosion 3
15 MT(DE)-22012 Modeling of Engineering Materials 3
16 MT-21013 Steel Making 3
17 ME(MI)-22002 Introduction to CAD/CAM 3
18 MT-22006 Major Project 8
19 MA-21001 Probability and Statistics for Engineers 3
20 MT(DE)-22006 LASER Materials Processing 3
21 MT(DE)-22007 Light Metals and Alloys 3
22 ETC(MI)-22002 Cloud Computing and IoT Platforms 3
23 MT-22007 Internship with Industry/Corporate/Academia 8
1 CE(MI)-22002 Basics of Transportation Engineering 3
2 AS(MI)-22004 Applied Finance 3
3 PL-22004 Planning Thesis- I 4
4 ME(MI)-22002 Introduction to CAD/CAM 3
5 AS(HS)-21001 English Proficiency Language 2
6 CT(MI)-22002 Data Science 3
7 PL-20006 Housing 3
8 PL-22007 Planning Practice and Ethics 3
9 PL-22008 Planning Thesis II 10
10 PL-22009 Urban Finance 3`.split("\n").map((x)=>{
    const t = x.split(" ");
    return [t[1], t.slice(2).join(" ")]
})  
const k = Object.fromEntries(e)
const getSGCG = (inputString) => {

    const decimalPattern = /\b\d+\.\d+\b/g;
    const decimalMatches = inputString.match(decimalPattern);
    const [SG, CG] = decimalMatches;
    return ({ SGPA: SG, CGPA: CG })
}


// const getByMISThreeDigits = (n) => {
//     const details = db[n].split(" ").slice(1, 5).join(" ");
//     const score = getSGCG(db[n])
    
//     const subjectWise = Object.fromEntries(db[n].split(" ").filter(x => x.slice(0, x.length - 4) in subjectMapping).map((x) => [x.substring(0, x.length - 4), x.substring(x.length - 3, x.length - 1)]).map((x) => [subjectMapping[x[0]], x.slice(1).join("")]));
//     return ({ details, score, subjectWise })
// }
const pointer = (string) => {
    const grade = {
        "A": 5,
        "B": 4,
        "C": 3,
        "D": 2,
        "E": 1,
        "F": 0,
    }
    if(string == "PP")return "Pass";
    if(string == "NR")return "Not Registered";
    return string.split("").reduce((t, x) => t + grade[x], 0);
}
// const getByMIS = () => {
//     let string = (db.filter((x, i) => {
//         const found = x.split(" ")[1] == n
//         return found
//     })[0])

//     const details = string.split(" ").slice(1, 5).join(" ");
//     const score = getSGCG(string)
   
//     const subjectWise = Object.fromEntries(string.split(" ").filter(x => x.slice(0, x.length - 4) in subjectMapping).map((x) => [x.substring(0, x.length - 4), x.substring(x.length - 3, x.length - 1)]).map((x) => [subjectMapping[x[0]], pointer(x.slice(1).join("")) + " : " + (x.slice(1).join(""))]));
//     return ({ details, score, subjectWise })
// }

const getResultByString= (resultString) => {
    try{
    console.log(resultString)
    const getNameLastIndex = resultString.match(/[0-9]/).index - 1;
    const details = resultString.slice(0, getNameLastIndex);
    console.log(details)
    const score = getSGCG(resultString)
    console.log(score)
    const decimalPattern = /\b\d+\.\d+\b/;
    const decimalMatches = resultString.match(decimalPattern);
    const creditLastIndex = decimalMatches.index;
    const creditString = resultString.slice(getNameLastIndex+1, creditLastIndex)
    const [creditsRegistered, creditsEarned,creditsEarnedTotal, creditPointsTotal] = creditString
    console.log(creditString)
    const subjectWise = Object.fromEntries(resultString.split(" ").filter(x => x.slice(0, x.length - 4) in subjectMapping).map((x) => [x.substring(0, x.length - 4), x.substring(x.length - 3, x.length - 1)]).map((x) => [subjectMapping[x[0]], pointer(x.slice(1).join("")) + " : " + (x.slice(1).join(""))]));
    console.log(subjectWise)
    return ({ details, score, subjectWise,credit:{creditsRegistered, creditsEarned,creditsEarnedTotal, creditPointsTotal} })
}catch(e){
    console.log(e)
}}

export{getSGCG, pointer,  getResultByString};
